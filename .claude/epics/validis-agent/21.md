---
name: Database Context System
status: open
created: 2025-09-10T11:41:46Z
updated: 2025-09-10T11:55:24Z
github: https://github.com/validis-group-holdings/validis-agent-psc/issues/21
depends_on: [001]
parallel: false
conflicts_with: []
---

# Task: Database Context System

## Description
Create a comprehensive database context system that loads schema information, table relationships, indexes, and business rules. This context will be provided to agents to enable accurate SQL generation.

## Acceptance Criteria
- [ ] Schema loader reads all table structures from SQL Server
- [ ] Relationship mappings documented (foreign keys, joins)
- [ ] Index information extracted (especially clustered indexes)
- [ ] Business rules documented (e.g., working capital calculations)
- [ ] Context formatted for agent consumption
- [ ] Sample queries included for each template type

## Technical Details
- Query INFORMATION_SCHEMA views for metadata
- Create TypeScript interfaces for schema types
- Build context documents in markdown format
- Include example SQL for common patterns
- Store context in memory for fast access

## Dependencies
- [ ] Task 001 completed (database connection)
- [ ] Access to full database schema
- [ ] Business rule documentation from PRD

## Effort Estimate
- Size: M
- Hours: 12-16
- Parallel: false (depends on database setup)

## Definition of Done
- [ ] Schema loader successfully extracts all tables
- [ ] Context document generated with all metadata
- [ ] Business rules clearly documented
- [ ] Sample queries validated against database
- [ ] Context accessible via API endpoint
