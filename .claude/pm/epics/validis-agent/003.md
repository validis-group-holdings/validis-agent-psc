---
name: Query Templates
status: open
created: 2025-08-28T13:40:28Z
updated: 2025-08-28T14:01:20Z
github: https://github.com/validis-group-holdings/validis-agent-mvp/issues/4
depends_on: [001]
parallel: true
conflicts_with: []
---

# Task: Query Templates

## Description
Create 20-30 SQL query templates that ALL use the upload table pattern for common audit and lending queries, with proper client_id scoping and performance optimization.

## Acceptance Criteria
- [ ] 10 audit workflow query templates created
- [ ] 10 lending workflow query templates created
- [ ] 5-10 shared/common query templates created
- [ ] All templates use upload table as entry point
- [ ] All templates include client_id filtering
- [ ] Templates use parameterized queries (no SQL injection)
- [ ] Each template documented with use case and expected results

## Technical Details
- Implementation approach: Create template library with categorization
- Key files: `src/queries/audit/`, `src/queries/lending/`, `src/queries/common/`
- Template format: SQL with named parameters
- Include metadata: description, parameters, expected runtime
- Version control for template changes

Query examples:
- Audit: Journal entries over threshold, weekend transactions, user activity
- Lending: Portfolio cash positions, revenue trends, debt capacity
- Common: Company details, period summaries, account balances

## Dependencies
- [ ] Task 001 (Setup & Configuration) completed
- [ ] Understanding of database schema

## Effort Estimate
- Size: M
- Hours: 12-16
- Parallel: true (can work alongside task 002)

## Definition of Done
- [ ] All templates created and tested against database
- [ ] Templates documented with examples
- [ ] Performance tested (all queries < 3 seconds)
- [ ] Templates organized by workflow type
- [ ] Integration with query safety layer verified