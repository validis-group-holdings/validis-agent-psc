---
name: Domain Agents (Lending & Audit)
status: open
created: 2025-09-10T11:41:46Z
updated: 2025-09-10T11:55:24Z
github: https://github.com/validis-group-holdings/validis-agent-psc/issues/23
depends_on: [002]
parallel: true
conflicts_with: []
---

# Task: Domain Agents (Lending & Audit)

## Description
Create specialized Lending and Audit agents with tailored prompts and domain knowledge. These agents generate dynamic SQL from natural language, using templates as guidance but not constraints.

## Acceptance Criteria
- [ ] Lending Agent handles portfolio-wide queries
- [ ] Audit Agent handles company-specific queries
- [ ] Both agents generate valid SQL 95% of the time
- [ ] Templates provide structure but allow flexibility
- [ ] Agents explain their SQL generation logic
- [ ] Business rules correctly applied (e.g., working capital)

## Technical Details
- Create separate prompt templates for each agent
- Include full database schema in agent context
- Provide template examples without constraining queries
- Implement Chain of Thought reasoning
- Add SQL validation before returning

## Dependencies
- [ ] Task 002 completed (database context)
- [ ] Business rules documented
- [ ] Template examples defined

## Effort Estimate
- Size: XL
- Hours: 24-32
- Parallel: true (can work alongside orchestrator)

## Definition of Done
- [ ] Lending Agent passes all 8 lending template tests
- [ ] Audit Agent passes all 8 audit template tests
- [ ] Agents handle variations beyond templates
- [ ] Generated SQL uses proper indexes
- [ ] Unit tests for each agent
- [ ] SQL injection prevention verified
